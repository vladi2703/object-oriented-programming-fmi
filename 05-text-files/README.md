# :file_folder: –§–∞–π–ª–æ–≤–∏ –ø–æ—Ç–æ—Ü–∏. –†–∞–±–æ—Ç–∞ —Å —Ç–µ–∫—Å—Ç–æ–≤–∏ —Ñ–∞–π–ª–æ–≤–µ

## –ô–µ—Ä–∞—Ä—Ö–∏—è –Ω–∞ –ø–æ—Ç–æ—Ü–∏—Ç–µ –≤ C++

![Hierarchy of C++ stream classes](img/03-01-stream-hierarchy.png)

* istream: –ö–ª–∞—Å, –≤ –∫–æ–π—Ç–æ –µ –¥–µ—Ñ–∏–Ω–∏—Ä–∞–Ω –æ–ø–µ—Ä–∞—Ç–æ—Ä >>, –∫–∞–∫—Ç–æ –∏ —á–ª–µ–Ω-—Ñ—É–Ω–∫—Ü–∏–∏—Ç–µ get(), getline(), read().
* ostream: –ö–ª–∞—Å, –≤ –∫–æ–π—Ç–æ –µ –¥–µ—Ñ–∏–Ω–∏—Ä–∞–Ω –æ–ø–µ—Ä–∞—Ç–æ—Ä <<, –∫–∞–∫—Ç–æ –∏ —á–ª–µ–Ω-—Ñ—É–Ω–∫—Ü–∏–∏—Ç–µ put(), write().
* iostream: –ü—Ä–∏—Ç–µ–∂–∞–≤–∞ –≤—Å–∏—á–∫–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –∫–∞–∫—Ç–æ –Ω–∞ **istream**, —Ç–∞–∫–∞ –∏ –Ω–∞ **ostream**.

## –†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–æ–≤–µ

–ó–∞ –¥–∞ —Ä–∞–±–æ—Ç–∏–º —Å —Ñ–∞–π–ª–æ–≤–∏ –ø–æ—Ç–æ—Ü–∏, —Ç—Ä—è–±–≤–∞ –¥–∞ –≤–∫–ª—é—á–∏–º —Ö–µ–¥—ä—Ä–∞ `fstream`:

```cpp
#include <fstream>
```

–î–æ–±—Ä–∞ –ø—Ä–∞–∫—Ç–∏–∫–∞ –µ, –∞–∫–æ –∑–Ω–∞–µ—Ç–µ, —á–µ —â–µ —Ä–∞–±–æ—Ç–∏—Ç–µ —Å–∞–º–æ —Å –ø–æ—Ç–æ–∫ –∑–∞ –≤—Ö–æ–¥ –∏–ª–∏ –∏–∑—Ö–æ–¥ —Ä–∞–±–æ—Ç–∏—Ç–µ –¥–∞ –≤–∫–ª—é—á–∏—Ç–µ —Å–∞–º–æ –Ω–µ–≥–æ–≤–∏—è —Ö–µ–¥—ä—Ä.

### –ü–∏—Å–∞–Ω–µ –≤—ä–≤ —Ñ–∞–π–ª

```cpp
std::ofstream of_stream;
of_stream.open("filename.txt");

// check successful open
if (!of_stream.is_open())
{
    // handle error
}

of_stream << "I like files\n";
of_stream << "a lot\n";
of_stream << 512;

of_stream.close();
```

### –ß–µ—Ç–µ–Ω–µ –æ—Ç —Ñ–∞–π–ª

```cpp
std::ifstream if_stream;
if_stream.open("filename.txt");

// check successful open
if (!if_stream.is_open())
{
    // handle error
}

const int buffer_size = 1024;
char line[buffer_size];
while (if_stream.getline(line, buffer_size))
{
    std::cout << line << "\n";
}

if_stream.close();
```

### –†–µ–∂–∏–º –Ω–∞ –æ—Ç–≤–∞—Ä—è–Ω–µ

–ü—Ä–∏ –æ—Ç–≤–∞—Ä—è–Ω–µ –Ω–∞ —Ñ–∞–π–ª, –º–æ–∂–µ–º –¥–∞ –∏–∑–±–µ—Ä–µ–º **mode** (—Ä–µ–∂–∏–º) –Ω–∞ —Ä–∞–±–æ—Ç–∞, –∫–æ–º–±–∏–Ω–∏—Ä–∞–π–∫–∏ —Å–ª–µ–¥–Ω–∏—Ç–µ —Ñ–ª–∞–≥–æ–≤–µ:

| –§–ª–∞–≥        | –ó–Ω–∞—á–µ–Ω–∏–µ                                                                               |
| --- | --- |
| **`ios::in`**     | –û—Ç–≤–∞—Ä—è–Ω–µ —Å –æ–ø–µ—Ä–∞—Ü–∏–∏ –∑–∞ –≤—Ö–æ–¥                                                            |
| **`ios::out`**    | –û—Ç–≤–∞—Ä—è–Ω–µ —Å –æ–ø–µ—Ä–∞—Ü–∏–∏ –∑–∞ –∏–∑—Ö–æ–¥                                                           |
| **`ios::binary`** | –û—Ç–≤–∞—Ä—è–Ω–µ –≤ –¥–≤–æ–∏—á–µ–Ω —Ä–µ–∂–∏–º                                                               |
| **`ios::ate`**    | **–ü—ä—Ä–≤–æ–Ω–∞—á–∞–ª–Ω–æ** –ø–æ—Å—Ç–∞–≤—è –ø–æ–∑–∏—Ü–∏—è—Ç–∞ –Ω–∞ —É–∫–∞–∑–∞—Ç–µ–ª—è –∫—Ä–∞—è –Ω–∞ —Ñ–∞–π–ª–∞                                                    |
| **`ios::app`**    | **–í—Å–∏—á–∫–∏** –∏–∑—Ö–æ–¥–Ω–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å–µ –∏–∑–≤—ä—Ä—à–≤–∞—Ç **–Ω–∞ –∫—Ä–∞—è** –Ω–∞ —Ñ–∞–π–ª–∞ –±–µ–∑ –¥–∞ —Å–µ –∏–∑—Ç—Ä–∏–≤–∞—Ç –¥–æ—Å–µ–≥–∞—à–Ω–∏—Ç–µ –¥–∞–Ω–Ω–∏. |
| **`ios::trunc`**  | –ü—Ä–∏ –æ—Ç–≤–∞—Ä—è–Ω–µ –∑–∞ –∏–∑—Ö–æ–¥–Ω–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∑–∞ —Å—ä—â–µ—Å—Ç–≤—É–≤–∞—â —Ñ–∞–π–ª ‚Äì –¥–æ—Å–µ–≥–∞—à–Ω–∏—Ç–µ –¥–∞–Ω–Ω–∏ —Å–µ –∏–∑—Ç—Ä–∏–≤–∞—Ç   |

–§–ª–∞–≥–æ–≤–µ—Ç–µ —Å–µ –∫–æ–º–±–∏–Ω–∏—Ä–∞—Ç —Å –ø–æ–±–∏—Ç–æ–≤–æ OR –∏ —Å–µ –¥–∞–≤–∞—Ç –∫–∞—Ç–æ –≤—Ç–æ—Ä–∏ –∞—Ä–≥—É–º–µ–Ω—Ç –Ω–∞ `open()`.

üî¥ –í–∞–∂–Ω–æ

* `ios::in` —Ñ–ª–∞–≥—ä—Ç –µ –≤–∏–Ω–∞–≥–∏ –≤–¥–∏–≥–Ω–∞—Ç –ø—Ä–∏ –æ—Ç–≤–∞—Ä—è–Ω–µ –Ω–∞ –ø–æ—Ç–æ–∫ –∑–∞ –≤—Ö–æ–¥
* `ios::out` —Ñ–ª–∞–≥—ä—Ç –µ –≤–∏–Ω–∞–≥–∏ –≤–¥–∏–≥–Ω–∞—Ç –ø—Ä–∏ –æ—Ç–≤–∞—Ä—è–Ω–µ –Ω–∞ –ø–æ—Ç–æ–∫ –∑–∞ –∏–∑—Ö–æ–¥

### –ü—Ä–∏–º–µ—Ä–∏

```cpp
// ios::out –≤–∏–Ω–∞–≥–∏ –µ –≤–¥–∏–≥–Ω–∞—Ç
of_stream.open(file_name);

// –µ–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ –Ω–∞ –ø—ä—Ä–≤–∏—è open()
of_stream.open(file_name, std::ios::out);

// –æ—Ç–≤–∞—Ä—è–Ω–µ –≤ –¥–≤–æ–∏—á–µ–Ω —Ä–µ–∂–∏–º –Ω–∞ –∏–∑—Ö–æ–¥–Ω–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏,
// –ø–æ—Å—Ç–∞–≤—è–π–∫–∏ —É–∫–∞–∑–∞—Ç–µ–ª—è –≤ –∫—Ä–∞—è –Ω–∞ —Ñ–∞–π–ª–∞
of_stream.open(file_name, std::ios::binary | std::ios::ate);

// –æ—Ç–≤–∞—Ä—è–Ω–µ —Å –∏–∑—Ö–æ–¥–Ω–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏, –∏–∑—Ç—Ä–∏–≤–∞–π–∫–∏
// —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ—Ç–æ –Ω–∞ —Ñ–∞–π–ª–∞
of_stream.open(file_name, std::ios::trunc);
```

### –°—ä—Å—Ç–æ—è–Ω–∏–µ –Ω–∞ –ø–æ—Ç–æ–∫–∞

–ü–æ–¥–æ–±–Ω–æ –Ω–∞ —Ñ–ª–∞–ª–≥–æ–≤–µ—Ç–µ –∑–∞ —Ä–µ–∂–∏–º –Ω–∞ —Ä–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª, –º–æ–∂–µ–º –¥–∞ —Ä–∞–∑–±–µ—Ä–µ–º —Å—ä—Å—Ç–æ—è–Ω–∏–µ—Ç–æ –Ω–∞ –ø–æ—Ç–æ–∫–∞ —á—Ä–µ–∑ —Ñ–ª–∞–≥–æ–≤–µ—Ç–µ:

| –§–ª–∞–≥ | –ó–Ω–∞—á–µ–Ω–∏–µ |
| --- | --- |
| **`ios::eofbit`** | –î–æ—Å—Ç–∏–≥–Ω–∞—Ç –µ –∫—Ä–∞—è—Ç –Ω–∞ —Ñ–∞–π–ª–∞ |
| **`ios::failbit`** | –õ–æ–≥–∏—á–µ—Å–∫–∞ –≥—Ä–µ—à–∫–∞ |
| **`ios::badbit`** | –ì—Ä–µ—à–∫–∞ –ø—Ä–∏ —á–µ—Ç–µ–Ω–µ/–ø–∏—Å–∞–Ω–µ, –∫–æ—è—Ç–æ –µ –Ω–∞–≤—Ä–µ–¥–∏–ª–∞ –Ω–∞ –ø–æ—Ç–æ–∫–∞ |
| **`ios::goodbit`** | –ù—è–º–∞ –≥—Ä–µ—à–∫–∏ |

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ —É–∫–∞–∑–∞—Ç–µ–ª—è –∑–∞ —á–µ—Ç–µ–Ω–µ/–ø–∏—Å–∞–Ω–µ

* [`tellg()`](http://www.cplusplus.com/reference/istream/istream/tellg/) ‚Äì –≤—Ä—ä—â–∞ —Ç–µ–∫—É—â–∞—Ç–∞ –ø–æ–∑–∏—Ü–∏—è –Ω–∞ `get` —É–∫–∞–∑–∞—Ç–µ–ª—è
* [`tellp()`](http://www.cplusplus.com/reference/ostream/ostream/tellp/) ‚Äì –≤—Ä—ä—â–∞ —Ç–µ–∫—É—â–∞—Ç–∞ –ø–æ–∑–∏—Ü–∏—è –Ω–∞ `put` —É–∫–∞–∑–∞—Ç–µ–ª—è
* [`seekg()`](https://www.cplusplus.com/reference/istream/istream/seekg/) ‚Äì –ø—Ä–æ–º–µ–Ω—è —Ç–µ–∫—É—â–∞—Ç–∞ –ø–æ–∑–∏—Ü–∏—è –Ω–∞ `get` —É–∫–∞–∑–∞—Ç–µ–ª—è
* [`seekp()`](https://www.cplusplus.com/reference/ostream/ostream/seekp/) ‚Äì –ø—Ä–æ–º–µ–Ω—è —Ç–µ–∫—É—â–∞—Ç–∞ –ø–æ–∑–∏—Ü–∏—è –Ω–∞ `put` —É–∫–∞–∑–∞—Ç–µ–ª—è

```cpp
file.seekg(10, std::ios::beg);
int posGet = file.tellg();
file.seekp(10, std::ios::beg);
int posPut = file.tellp();
```

## –ó–∞–¥–∞—á–∏

**–ó–∞ –∑–∞–¥–∞—á–∏—Ç–µ –µ –ø–æ–∑–≤–æ–ª–µ–Ω–æ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–µ—Ç–æ –Ω–∞ std::string.**

**–ó–∞–¥. 1.** –î–∞ —Å–µ –Ω–∞–º–µ—Ä–∏ –≥–æ–ª–µ–º–∏–Ω–∞—Ç–∞ –Ω–∞ —Ñ–∞–π–ª.

**–ó–∞–¥. 2.** –î–∞ —Å–µ –Ω–∞–ø–∏—à–µ –ø—Ä–æ–≥—Ä–∞–º–∞, –∫–æ—è—Ç–æ —Ä–∞–∑–ø–µ—á–∞—Ç–≤–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–∏—è —Å–∏ –∫–æ–¥.

**–ü–æ –∂–µ–ª–∞–Ω–∏–µ - –∑–∞ –±–æ–Ω—É—Å** –î–∞ —Å–µ –Ω–∞–ø–∏—à–µ —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—è—Ç–æ –ø–æ –ø–æ–¥–∞–¥–µ–Ω —Ñ–∞–π–ª, —Å—ä–∑–¥–∞–≤–∞ –Ω–æ–≤ —Ñ–∞–π–ª —Å –∏–º–µ "corrected", –∑–∞–º–µ—Å—Ç–≤–∞–π–∫–∏ –≤—Å–∏—á–∫–∏ —Å—Ä–µ—â–∞–Ω–∏—è –Ω–∞ –¥–∞–¥–µ–Ω–∞ –¥—É–º–∞ —Å –¥—Ä—É–≥–∞. –ü—Ä–∏–µ–º–µ—Ç–µ, —á–µ –¥—É–º–∞—Ç–∞ –∫–æ—è—Ç–æ —â–µ –∑–∞–º–µ–Ω—è–º–µ –µ —Å –¥—ä–ª–∂–∏–Ω–∞ –ø–æ-–≥–æ–ª—è–º–∞ –æ—Ç –¥—É–º–∞—Ç–∞, —Å –∫–æ—è—Ç–æ —â–µ —è –∑–∞–º–µ–Ω–∏–º.

**–ó–∞–¥. 3.** –ù–∞–ø—Ä–∞–≤–µ—Ç–µ —Å–æ—Ñ—Ç—É–µ—Ä –∑–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –º–∞–≥–∞–∑–∏–Ω –∑–∞ –æ–±—É–≤–∫–∏, –≤ –∫–æ–π—Ç–æ –º–æ–≥–∞—Ç –¥–∞ —Å–µ –ø—Ä–µ–¥–ª–∞–≥–∞—Ç –Ω–∞–π-–º–Ω–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω –±—Ä–æ–π –º–æ–¥–µ–ª–∏ –æ–±—É–≤–∫–∏.

–î–∞–Ω–Ω–∏—Ç–µ, –∫–æ–∏—Ç–æ –Ω–∏ –∏–Ω—Ç–µ—Ä–µ—Å—É–≤–∞—Ç –∑–∞ –µ–¥–∏–Ω –º–æ–¥–µ–ª –æ–±—É–≤–∫–∏, —Å–∞:

* –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª(–Ω–∏–∑)
* –º–æ–¥–µ–ª(–Ω–∏–∑)
* —Ü–µ–Ω–∞(double)
* —Ä–µ–π—Ç–∏–Ω–≥(double)
* –±—Ä–æ–π —á–∏—Ñ—Ç–æ–≤–µ –≤ —Å–∫–ª–∞–¥–∞

–î–∞ —Å–µ —Ä–µ–∞–ª–∏–∑–∏—Ä–∞—Ç —Å–ª–µ–¥–Ω–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏–∏/–º–µ—Ç–æ–¥–∏:

* –≥–æ–ª—è–º–∞ —á–µ—Ç–≤–æ—Ä–∫–∞, –Ω–æ –≤–º–µ—Å—Ç–æ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –ø–æ –ø–æ–¥—Ä–∞–∑–±–∏—Ä–∞–Ω–µ –Ω–∞–ø—Ä–∞–≤–µ—Ç–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–æ–π—Ç–æ –ø—Ä–∏–µ–º–∞ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–æ —á–∏—Å–ª–æ - –º–∞–∫—Å–∏–º–∞–ª–Ω–∏—è –±—Ä–æ–π –º–æ–¥–µ–ª–∏ –æ–±—É–≤–∫–∏, –∫–æ–∏—Ç–æ –º–æ–≥–∞—Ç –¥–∞ —Å–µ –Ω–∞–º–∏—Ä–∞—Ç –≤ —Å–∫–ª–∞–¥–∞.
* –¥–æ–±–∞–≤—è–Ω–µ –Ω–∞ –Ω–æ–≤ –º–æ–¥–µ–ª –æ–±—É–≤–∫–∏ —Å –Ω–∞—á–∞–ª–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ (–∞–∫–æ —Ç–∞–∫—ä–≤ –≤–µ—á–µ –∏–º–∞, –¥–∞ —Å–µ —Ö–≤—ä—Ä–ª–∏ –≥—Ä–µ—à–∫–∞)
* –ø—Ä–æ–¥–∞–≤–∞–Ω–µ –Ω–∞ —á–∏—Ñ—Ç –æ—Ç –¥–∞–¥–µ–Ω –º–æ–¥–µ–ª (–∞–∫–æ –Ω—è–º–∞ —Ç–∞–∫—ä–≤, –¥–∞ —Å–µ —Ö–≤—ä—Ä–ª–∏ –≥—Ä–µ—à–∫–∞. –ê–∫–æ —Ç–æ–≤–∞ –µ –ø–æ—Å–ª–µ–¥–Ω–∏—è —á–∏—Ñ—Ç, –º–æ–¥–µ–ª–∞ –¥–∞ —Å–µ –ø—Ä–µ–º–∞—Ö–Ω–µ –æ—Ç –º–∞–≥–∞–∑–∏–Ω–∞)
* –¥–æ–±–∞–≤—è–Ω–µ –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç –¥–∞–¥–µ–Ω –º–æ–¥–µ–ª (–∞–∫–æ –Ω—è–º–∞ —Ç–∞–∫—ä–≤, –¥–∞ —Å–µ —Ö–≤—ä—Ä–ª–∏ –≥—Ä–µ—à–∫–∞)
* –ø—Ä–æ–º—è–Ω–∞ –Ω–∞ —Ä–µ–π—Ç–∏–Ω–≥–∞ –Ω–∞ –¥–∞–¥–µ–Ω –º–æ–¥–µ–ª
* –ø—Ä–µ–º–∞—Ö–≤–∞–Ω–µ –Ω–∞ –¥–∞–¥–µ–Ω –º–æ–¥–µ–ª
* —á–µ—Ç–µ–Ω–µ –Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è—Ç–∞ –∑–∞ —Å–∫–ª–∞–¥–∞ –æ—Ç —Ñ–∞–π–ª (—Ç–µ–∫—É—â–∏—Ç–µ –¥–∞–Ω–Ω–∏ —Å–µ –∏–∑—Ç—Ä–∏–≤–∞—Ç –∏ —Å–µ –∑–∞–º–µ—Å—Ç–≤–∞—Ç —Å –Ω–æ–≤–∏—Ç–µ, –ø—Ä–æ—á–µ—Ç–µ–Ω–∏ –æ—Ç —Ñ–∞–π–ª–∞)
* –∑–∞–ø–∏—Å–≤–∞–Ω–µ –Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è—Ç–∞ –∑–∞ —Å–∫–ª–∞–¥–∞ –≤—ä–≤ —Ñ–∞–π–ª (–≤–∏–µ –∏–∑–±–∏—Ä–∞—Ç–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª–Ω–æ—Å—Ç—Ç–∞ –∏ –Ω–∞—á–∏–Ω–∞ –ø–æ-–∫–æ–π—Ç–æ –¥–∞ —Å–∞ –∑–∞–ø–∏—Å–∞–Ω–∏ –¥–∞–Ω–Ω–∏—Ç–µ)
* –±–æ–Ω—É—Å: —Å–æ—Ä—Ç–∏—Ä–∞–Ω–µ –Ω–∞ –º–æ–¥–µ–ª–∏—Ç–µ –ø–æ:
  * —Å—Ä–µ–¥–µ–Ω —Ä–µ–π—Ç–∏–Ω–≥
  * –±—Ä–æ–π –ø—Ä–æ–¥–∞–¥–µ–Ω–∏

<details>
<summary>–ü—Ä–µ–ø–æ—Ä—ä–∫–∏:</summary>
–ó–∞–ø–∏—Å–≤–∞–π—Ç–µ –¥–∞–Ω–Ω–∏—Ç–µ –≤ —Ç–µ–∫—Å—Ç–æ–≤ —Ñ–∞–π–ª, –≤—Å—è–∫–∞ –¥–∞–Ω–Ω–∞ –Ω–∞ –Ω–æ–≤ —Ä–µ–¥ —Å –æ–ø–µ—Ä–∞—Ç–æ—Ä–∏ >> –∏ <<.
–ò–º–∞ –¥–≤–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ –∑–∞ —Å–ø–∏—Å—ä–∫–∞ —Å –æ–±—É–≤–∫–∏—Ç–µ:  
1.    –º–æ–∂–µ –¥–∞ –ø–æ–ª–∑–≤–∞—Ç–µ Shoe** arr = new Shoe*[max_size]. –í—Å–µ–∫–∏ —É–∫–∞–∑–∞—Ç–µ–ª –≤ –º–∞—Å–∏–≤–∞ –¥–∞ —Å–æ—á–∏ –∫—ä–º —Ç–æ—á–Ω–æ –µ–¥–∏–Ω –æ–±–µ–∫—Ç –ø—Ä–∏ –Ω—É–∂–¥–∞ –∏–ª–∏ nullptr  
2.    –ø—Ä–æ—Å—Ç–æ Shoe* arr = new Shoe[max_size]. –Ω–æ —Ç–∞–∫–∞ —Å–µ –∑–∞–¥–µ–ª—è –ø–∞–º–µ—Ç –∑–∞ –∏–∑–ª–∏—à–Ω–∏ –æ–±–µ–∫—Ç–∏...
</details>
